<!DOCTYPE html>

<html lang="en">

	<head>

		<title>

			ddan9 | TODO

		</title>

		<meta name="description" content="TODO List Application">

		<meta name="keywords" content="Todo, TODO, List, TODO List, Web, Vue, Materialize">

		<meta name="author" content="ddan9">

		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>

		<meta name="color-scheme" content="light">

		<link rel="icon" type="image/png" href="https://img.icons8.com/stickers/100/000000/task.png">

		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js">

		</script>

		<script src="https://code.jquery.com/jquery-3.2.1.min.js" type="text/javascript">

		</script>

		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js">

		</script>

		<style>

			body

			{

				display: flex;

				min-height: 100vh;

				flex-direction: column;

			}

			main

			{

				flex: 1 0 auto;

			}

			div.app

			{

				display: flex;

				min-height: 100vh;

				flex-direction: column;

			}

		</style>

	</head>

	<body>

		<div class="app" id="app">

			<custom-navbar v-bind:reload="reload">

			</custom-navbar>

			<main>

				<task-list v-bind:todos="this.todos" v-bind:date="dateNow" v-bind:fullname="fullName" v-bind:removetask="removeTask">

				</task-list>

				<form-task v-bind:addtask="addTask" v-bind:todos="this.todos" v-bind:clear="clear">

				</form-task>

			</main>

			<custom-footer>

			</custom-footer>

		</div>

		<script>

			"use strict"

			Vue.component("custom-navbar", {

				props: [

					"reload"

				],

				template: `

					<div class="navbar-fixed">

						<nav class="teal darken-1" role="navigation">

							<div class="nav-wrapper container">

								<a v-on:click="reload" href="#!" class="brand-logo left">

									<i class="material-icons">

										task

									</i>

									TODO

								</a>

								<ul class="right">

									<li>

										<a href="#!">

											<i class="material-icons">

												search

											</i>

										</a>

									</li>

									<li>

										<a v-on:click="reload" href="#!">

											<i class="material-icons">

												refresh

											</i>

										</a>

									</li>

								</ul>

							</div>

						</nav>

					</div>

				`

			})

			Vue.component("task-list", {

				props: {

					todos: Array,

					date: String,

					fullname: String,

					removetask: Function

				},

				template: `

					<ul class="collection with-header">

						<li class="collection-header">

							<h5>

								Hello, {{ fullname }}

							</h5>

							<h6>

								Today: {{ date }}

							</h6>

							<h6>

								Tasks: {{ todos.length }}

							</h6>

						</li>

						<li v-for="(todo, index) in todos" class="collection-item" style="overflow: hidden; overflow-wrap: break-word; word-wrap: break-word; white-space: normal">

							<div>

								{{ todo.task }}

								<a v-on:click="removetask(index)" href="#!" class="secondary-content">

									<i class="material-icons">

										delete

									</i>

								</a>

							</div>

						</li>

					</ul>

				`

			})

			Vue.component("form-task", {

				props: {

					"addtask": Function,

					"todos": Array,

					"clear": Function

				},

				template: `

					<div class="row">

						<form class="col s12">

							<div class="row">

								<div class="input-field col s12">

									<textarea id="textarea1" class="materialize-textarea" v-on:keydown.enter="addtask" autofocus="autofocus"></textarea>

									<label for="textarea1" autofocus="autofocus">

										New task

									</label>

								  	<button v-if="todos.length > 0" v-on:click="clear" class="btn waves-effect waves-light left" type="submit" name="action">

								  		Clean up

										<i class="material-icons right">

											delete

										</i>

									</button>

									<button v-on:click="addtask" class="btn waves-effect waves-light right" type="submit" name="action">

										Add

										<i class="material-icons right">

											add

										</i>

									</button>

								</div>

							</div>

						</form>

					</div>

				`

			})

			Vue.component("custom-footer", {

				template: `

					<footer class="teal darken-1 page-footer" style="bottom: 0; left: 0; width: 100%; ">

						<div class="container">

							<div class="row">

								<div class="col l6 s12">

									<h5 class="white-text">

										TODO List Application

									</h5>

									<p class="grey-text text-lighten-4">

										Created just while learning Vue.js and Materialize.css

									</p>

									<p class="grey-text text-lighten-4">

										You can enter your tasks here

									</p>

								</div>

								<div class="col l4 offset-l2 s12">

									<h5 class="white-text">

										Contacts

									</h5>

									<ul>
										<li>

											<a class="grey-text text-lighten-3" href="https://ddan9.github.io">

												GitHub

											</a>

										</li>

										<li>

											<a class="grey-text text-lighten-3" href="https://freelance.habr.com/freelancers/r3ddan9">

												Habr

											</a>

										</li>

										<li>

											<a class="grey-text text-lighten-3" href="mailto:ddan9.github@rambler.ru">

												Email

											</a>

										</li>

										<li>

											<a class="grey-text text-lighten-3" href="https://t.me/ddan9_tg">

												Telegram

											</a>

										</li>

									</ul>

								</div>

							</div>

						</div>

						<div class="footer-copyright">

							<div class="container center">

								Â© 2022 Licenced by GNU GPL v3

							</div>

						</div>

					</footer>

				`

			})

			var app = new Vue({

				el: "#app",

				data: {

					firstName: "Danil",

					lastName: "Sergeevich",

					todos: [ ]

				},

				mounted() {

					if (localStorage.todos) {

						this.todos = localStorage.todos

					}

				},

				watch: {

					name(todosDB) {

						localStorage.todos = todosDB

					}

				},

				methods: {

					addTask: function() {

						event.preventDefault()

						var input = document.getElementById("textarea1").value.trim()

						if ( input != "" && input != null ) {

							this.todos.push({ task: input })

						}

						document.getElementById("textarea1").value = ""

						document.getElementById("textarea1").focus()

					},

					clear: function() {

						if ( this.todos != "" && this.todos != null) {

							document.location.reload()

						}

					},

					reload: function() {

						document.location.reload()

					},

					removeTask: function(index) {

						this.todos.splice(index, 1)

					}

				},

				computed: {

					dateNow: function() {

						var fullDate = new Date()

						return fullDate.toLocaleDateString("ru-RU")

					},

					fullName: function() {

						return this.firstName + " " + this.lastName

					}

				},

				created: function() {

					console.log("Hello there! Seems like all is ok :) ")

				}

			})

			document.getElementById("textarea1").focus()

		</script>

	</body>

</html>
